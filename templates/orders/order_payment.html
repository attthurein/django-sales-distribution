{% extends "base.html" %}
{% load humanize i18n common_extras %}

{% block breadcrumb %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'orders:order_list' %}">{% trans "Orders" %}</a></li>
        <li class="breadcrumb-item"><a href="{% url 'orders:order_detail' order.pk %}">{{ order.order_number }}</a></li>
        <li class="breadcrumb-item active" aria-current="page">{% trans "Add Payment" %}</li>
    </ol>
</nav>
{% endblock %}

{% block content %}
<h1>{% trans "Add Payment" %} - {{ order.order_number }}</h1>
<p>{% trans "Total" %}: {{ order.total_amount|floatformat:0|intcomma }} {% currency_suffix %}</p>

<form method="post">
    {% csrf_token %}
    {% if form.non_field_errors %}
    <div class="alert alert-danger">
        {% for error in form.non_field_errors %}
            {{ error }}
        {% endfor %}
    </div>
    {% endif %}
    {% if form.errors %}
    <div class="alert alert-danger">{% trans "Please correct the errors below." %}</div>
    {% endif %}
    <div class="mb-3">
        <label class="form-label" for="{{ form.amount.id_for_label }}">{% trans "Amount" %} *</label>
        {{ form.amount }}
        {{ form.amount.errors }}
    </div>
    <div class="mb-3">
        <label class="form-label" for="{{ form.payment_method.id_for_label }}">{% trans "Payment Method" %}</label>
        {{ form.payment_method }}
        {{ form.payment_method.errors }}
    </div>
    <div class="mb-3">
        <label class="form-label" for="{{ form.reference_number.id_for_label }}">{% trans "Reference" %}</label>
        {{ form.reference_number }}
        {{ form.reference_number.errors }}
    </div>
    <div class="mb-3">
        <label class="form-label" for="{{ form.notes.id_for_label }}">{% trans "Notes" %}</label>
        {{ form.notes }}
        {{ form.notes.errors }}
    </div>
    <button type="submit" class="btn btn-primary">{% trans "Add Payment" %}</button>
    <a href="{% url 'orders:order_detail' order.pk %}" class="btn btn-secondary">{% trans "Cancel" %}</a>
</form>
{% endblock %}
